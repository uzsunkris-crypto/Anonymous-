<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Anonymous</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; font-family: Arial, sans-serif; }
  body { background: #0f0f0f; color: #fff; padding: 15px; }.container { max-width: 700px; margin: auto; display: flex; flex-direction: column; gap: 20px; }

header { text-align: center; } header h1 { font-size: 30px; margin-bottom: 5px; } header p { font-size: 14px; opacity: 0.7; }

.action-buttons { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; } .action-buttons button { flex: 1; min-width: 140px; padding: 10px; border: none; border-radius: 10px; font-size: 16px; background: #1f1f1f; color: #fff; }

textarea { width: 100%; min-height: 150px; padding: 12px; border-radius: 10px; border: 1px solid #333; background: #111; color: #fff; font-size: 16px; }

.file-input { margin-top: 5px; }

.post-btn { width: 100%; padding: 15px; background: #00c6ff; color: #000; font-weight: bold; border-radius: 10px; border: none; font-size: 18px; }

.world-mood-box { background: #1a1a1a; padding: 15px; border-radius: 12px; width: 100%; text-align: center; } .mood-bar { height: 10px; width: 100%; background: #333; border-radius: 6px; overflow: hidden; margin-top: 8px; } .mood-fill { height: 100%; width: 40%; background: #00c6ff; transition: 0.3s; }

.posts { display: flex; flex-direction: column; gap: 20px; }

.post { background: #161616; padding: 15px; border-radius: 12px; } .post img { width: 100%; border-radius: 10px; margin-top: 10px; }

@media (max-width: 480px) { header h1 { font-size: 25px; } .action-buttons { flex-direction: column; } .action-buttons button { width: 100%; } } </style>

</head><body>
  <div class="container">
    <header>
      <h1>Anonymous</h1>
      <p>No accounts • No tracking • Express freely</p>
    </header><div class="world-mood-box">
  <h3>World Mood</h3>
  <div class="mood-bar"><div class="mood-fill" id="moodFill"></div></div>
</div>

<div class="action-buttons">
  <button onclick="shuffleMood()">Shuffle</button>
  <button onclick="refreshPosts()">Refresh</button>
  <button onclick="toggleTheme()">Theme</button>
</div>

<textarea id="textInput" placeholder="Type how you feel about the world..."></textarea>

<input class="file-input" type="file" id="imageInput" accept="image/*" />

<button class="post-btn" onclick="postAnonymous()">Post anonymously</button>

<div class="posts" id="postsContainer"></div>

  </div><script type="module">
  // Firebase setup
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDcO-wf5h960vscEyMlz_QQaXSRP0CzzLk",
    authDomain: "anonymous-e06c8.firebaseapp.com",
    projectId: "anonymous-e06c8",
    storageBucket: "anonymous-e06c8.firebasestorage.app",
    messagingSenderId: "309422384352",
    appId: "1:309422384352:web:ea17f8a5edc42e03bf9c85",
    measurementId: "G-0BCHGR1Q07"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const storage = getStorage(app);

  const postsRef = collection(db, "posts");

  // Post anonymously
  async function postAnonymous() {
    const text = document.getElementById("textInput").value.trim();
    const file = document.getElementById("imageInput").files[0];

    let imageUrl = null;
    if (file) {
      const storageRef = ref(storage, "images/" + Date.now() + file.name);
      await uploadBytes(storageRef, file);
      imageUrl = await getDownloadURL(storageRef);
    }

    await addDoc(postsRef, {
      text: text,
      image: imageUrl,
      time: serverTimestamp(),
    });

    document.getElementById("textInput").value = "";
    document.getElementById("imageInput").value = "";

    refreshPosts();
  }

  // Load posts
  async function refreshPosts() {
    const container = document.getElementById("postsContainer");
    container.innerHTML = "";

    const data = await getDocs(postsRef);
    data.forEach((doc) => {
      const p = doc.data();

      const div = document.createElement("div");
      div.className = "post";

      div.innerHTML = `<p>${p.text || ""}</p>`;

      if (p.image) {
        div.innerHTML += `<img src="${p.image}" />`;
      }

      container.prepend(div);
    });
  }

  // World Mood randomizer
  function shuffleMood() {
    const mood = Math.floor(Math.random() * 100);
    document.getElementById("moodFill").style.width = mood + "%";
  }

  // Theme toggle
  function toggleTheme() {
    document.body.classList.toggle("light");
  }

  refreshPosts();
</script></body>
</html>
